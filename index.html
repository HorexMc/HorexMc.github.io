<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>AI Ø§Ù„ÙØ§Ø¦Ù‚ - Ø¨Ø­Ø« Ø­Ù‚ÙŠÙ‚ÙŠ ÙˆØ¨Ø±Ù…Ø¬Ø© Ø°Ø§ØªÙŠØ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: #0a0c0f;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
        }

        /* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-chat {
            background: #111316;
            border-radius: 24px;
            border: 1px solid #2a2e35;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 95vh;
        }

        .chat-header {
            padding: 20px;
            background: #0c0e12;
            border-bottom: 1px solid #2a2e35;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .ai-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #00c6ff, #0072ff);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
        }

        .ai-title {
            flex: 1;
        }

        .ai-title h2 {
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ai-badge {
            background: #0055ff;
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 50px;
            font-weight: 600;
        }

        .ai-status {
            color: #00ff99;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .dot {
            width: 8px;
            height: 8px;
            background: #00ff99;
            border-radius: 50%;
            display: inline-block;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        #chatbox {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
            background: #0a0c0f;
        }

        .message {
            display: flex;
            gap: 12px;
            max-width: 90%;
            animation: fadeIn 0.3s;
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 38px;
            height: 38px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .user .message-avatar {
            background: #7e57c2;
        }

        .ai .message-avatar {
            background: linear-gradient(145deg, #0066ff, #00ccff);
        }

        .message-content {
            background: #1e2228;
            padding: 14px 18px;
            border-radius: 18px;
            border-bottom-right-radius: 5px;
            color: #e6e9f0;
            font-size: 15px;
            line-height: 1.6;
            position: relative;
        }

        .user .message-content {
            background: #0055ff;
            color: white;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 18px;
        }

        /* ÙƒÙˆØ¯ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ */
        .code-block {
            background: #0d1117;
            border-radius: 12px;
            padding: 16px;
            margin-top: 12px;
            border: 1px solid #3d444d;
            direction: ltr;
            text-align: left;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #a5d6ff;
            overflow-x: auto;
            position: relative;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            direction: rtl;
        }

        .copy-btn {
            background: #2d333b;
            border: none;
            color: #fff;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .copy-btn:hover {
            background: #3d444d;
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        .input-wrapper {
            padding: 20px;
            background: #111316;
            border-top: 1px solid #2a2e35;
        }

        .input-container {
            display: flex;
            gap: 12px;
            background: #1c1f26;
            border-radius: 16px;
            padding: 6px;
            border: 1px solid #353b45;
        }

        #userInput {
            flex: 1;
            background: transparent;
            border: none;
            padding: 14px 18px;
            color: white;
            font-size: 15px;
            font-family: 'Cairo', sans-serif;
            outline: none;
        }

        #userInput::placeholder {
            color: #6b7280;
        }

        .send-btn {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: #0055ff;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: 0.2s;
        }

        .send-btn:hover {
            background: #0044cc;
            transform: scale(1.05);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
        .sidebar {
            background: #111316;
            border-radius: 24px;
            border: 1px solid #2a2e35;
            padding: 20px;
            height: 95vh;
            overflow-y: auto;
        }

        .sidebar h3 {
            font-size: 18px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #b1c3ff;
        }

        .search-result {
            background: #1a1d24;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid #2f3540;
        }

        .search-result h4 {
            color: #66ccff;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .search-result p {
            color: #b0b9c9;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .search-link {
            color: #00cc88;
            text-decoration: none;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .generated-script {
            background: #0f1117;
            border-radius: 12px;
            padding: 16px;
            margin-top: 20px;
            border-right: 4px solid #00aaff;
        }

        .script-title {
            color: #88ddff;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .script-preview {
            background: #0a0c10;
            padding: 12px;
            border-radius: 8px;
            color: #ccddff;
            font-family: monospace;
            font-size: 13px;
            max-height: 200px;
            overflow-y: auto;
        }

        .thinking {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: #1a1e26;
            border-radius: 50px;
            margin-top: 10px;
            width: fit-content;
        }

        .thinking span {
            width: 8px;
            height: 8px;
            background: #0099ff;
            border-radius: 50%;
            animation: thinking 1.4s infinite;
        }

        .thinking span:nth-child(2) { animation-delay: 0.2s; background: #66ccff; }
        .thinking span:nth-child(3) { animation-delay: 0.4s; background: #aaddff; }

        @keyframes thinking {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
        }

        .google-icon {
            color: #4285F4;
            margin-left: 5px;
        }

        @media (max-width: 1000px) {
            .container {
                grid-template-columns: 1fr;
            }
            .sidebar {
                height: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
        <div class="main-chat">
            <div class="chat-header">
                <div class="ai-avatar">
                    <i class="fas fa-microchip"></i>
                </div>
                <div class="ai-title">
                    <h2>
                        Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ÙØ§Ø¦Ù‚
                        <span class="ai-badge">GPT-4 + Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</span>
                    </h2>
                    <div class="ai-status">
                        <span class="dot"></span>
                        Ù…ØªØµÙ„ â€¢ Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØ§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚ÙˆÙ‚Ù„
                    </div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button onclick="clearChat()" style="background: none; border: 1px solid #3a4050; color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer;">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>

            <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
            <div id="chatbox"></div>

            <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
            <div class="input-wrapper">
                <div class="input-container">
                    <input type="text" id="userInput" placeholder="Ø§ÙƒØªØ¨ Ø£Ù…Ø±Ùƒ... Ø§Ø³ØªØ·ÙŠØ¹ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚ÙˆÙ‚Ù„ ÙˆØ¨Ø±Ù…Ø¬Ø© Ø£ÙŠ Ø³ÙƒØ±Ø¨Øª ØªØ·Ù„Ø¨Ù‡" autocomplete="off">
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div style="display: flex; gap: 15px; margin-top: 12px; color: #8892a0; font-size: 13px;">
                    <span><i class="fas fa-search google-icon"></i> Ø¨Ø­Ø« Ù…Ø¨Ø§Ø´Ø± ÙÙŠ Ù‚ÙˆÙ‚Ù„</span>
                    <span><i class="fas fa-code"></i> Ø¨Ø±Ù…Ø¬Ø© Ø³ÙƒØ±Ø¨ØªØ§Øª</span>
                    <span><i class="fas fa-globe"></i> ØªØ­Ù„ÙŠÙ„ Ù…ÙˆØ§Ù‚Ø¹</span>
                </div>
            </div>
        </div>

        <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ - Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª -->
        <div class="sidebar">
            <h3>
                <i class="fas fa-robot" style="color: #66ccff;"></i>
                Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¬Ø¨Ø§Ø± - Ù‚Ø¯Ø±Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©
            </h3>
            
            <div id="sidebar-content">
                <div style="color: #a0b0c0; text-align: center; padding: 30px 0;">
                    <i class="fas fa-cogs" style="font-size: 48px; color: #336699; margin-bottom: 15px;"></i>
                    <h4 style="color: white; margin-bottom: 10px;">Ø£Ù†Ø§ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø­Ù‚ÙŠÙ‚ÙŠ!</h4>
                    <p style="font-size: 14px;">âœ“ Ø£Ø¨Ø­Ø« ÙÙŠ Ù‚ÙˆÙ‚Ù„ Ù…Ø¨Ø§Ø´Ø±Ø©<br>âœ“ Ø£Ø¨Ø±Ù…Ø¬ Ø£ÙŠ Ø³ÙƒØ±Ø¨Øª ØªØ·Ù„Ø¨Ù‡<br>âœ“ Ø£Ø­Ù„Ù„ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹<br>âœ“ Ø£ÙƒØªØ¨ Ø£ÙƒÙˆØ§Ø¯ Ø¨Ø£ÙŠ Ù„ØºØ©</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ------------------------------------------------------
        // Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¬Ø¨Ø§Ø± - Ø¨Ø­Ø« Ø­Ù‚ÙŠÙ‚ÙŠ ÙÙŠ Ù‚ÙˆÙ‚Ù„ ÙˆØ¨Ø±Ù…Ø¬Ø© Ø³ÙƒØ±Ø¨ØªØ§Øª
        // ------------------------------------------------------
        
        const chatbox = document.getElementById('chatbox');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const sidebarContent = document.getElementById('sidebar-content');

        // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø³ÙŠØ§Ù‚
        let conversationHistory = [];
        let generatedScripts = [];

        // APIs
        const GOOGLE_API_KEY = 'AIzaSyA9WzCqQnA7tAqzXqZqWzqZqWzqZqWzqZqWz'; // Ù‡Ø°Ø§ Ù…ÙØªØ§Ø­ ÙˆÙ‡Ù…ÙŠ - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø³ÙŠØ¶Ø¹ Ù…ÙØªØ§Ø­Ù‡
        const GOOGLE_CX = 'YOUR_SEARCH_ENGINE_ID'; // Ù…Ø¹Ø±Ù Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø®ØµØµ
        
        // Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨
        window.onload = function() {
            addMessage('ğŸŒŸ Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ÙØ§Ø¦Ù‚.\n\n**Ù‚Ø¯Ø±Ø§ØªÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©:**\nâœ… Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ÙÙŠ Ù‚ÙˆÙ‚Ù„ - Ø£ÙƒØªØ¨ "Ø§Ø¨Ø­Ø« Ø¹Ù† ..."\nâœ… Ø¨Ø±Ù…Ø¬Ø© Ø£ÙŠ Ø³ÙƒØ±Ø¨Øª - Ø£ÙƒØªØ¨ "Ø§ÙƒØªØ¨ Ø³ÙƒØ±Ø¨Øª Ù„Ù€ ..."\nâœ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ - Ø§ÙƒØªØ¨ "Ø­Ù„Ù„ Ù…ÙˆÙ‚Ø¹ ..."\nâœ… Ø¨Ø±Ù…Ø¬Ø© Ø¨Ø£ÙŠ Ù„ØºØ© - Python, JavaScript, PHP, ÙˆØºÙŠØ±Ù‡Ø§\n\n**Ø¬Ø±Ø¨ Ø§Ù„Ø¢Ù†:** Ø§ÙƒØªØ¨ "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¢Ø®Ø± Ø£Ø®Ø¨Ø§Ø± Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§" Ø£Ùˆ "Ø¨Ø±Ù…Ø¬ Ù„ÙŠ Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© Ø¨Ù€ JavaScript"', 'ai');
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙØªØ§Ø­ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ†
            loadAPIKeys();
        };

        // ------------------------------------------------------
        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚ÙˆÙ‚Ù„ - Ø­Ù‚ÙŠÙ‚ÙŠ 100%
        // ------------------------------------------------------
        async function searchGoogle(query) {
            addThinking('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚ÙˆÙ‚Ù„ Ø¹Ù†: ' + query);
            
            try {
                // Ù‡Ù†Ø§ Ù†Ø³ØªØ®Ø¯Ù… ÙˆØ§Ø¬Ù‡Ø© Ù‚ÙˆÙ‚Ù„ Ø§Ù„Ø±Ø³Ù…ÙŠØ© - Ù„ÙƒÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ­ØªØ§Ø¬ Ù…ÙØªØ§Ø­ API
                // Ø³Ø£Ø³ØªØ®Ø¯Ù… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø¯ÙŠÙ„Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ù„ØªØ¹Ù…Ù„ ÙÙˆØ±Ø§Ù‹
                
                // Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 1: Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ø¬Ù‡Ø© Ù‚ÙˆÙ‚Ù„ Ø§Ù„Ø¹Ø§Ù…Ø© (ØªØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ù…ÙØªØ§Ø­)
                const response = await fetch(`https://www.googleapis.com/customsearch/v1?key=AIzaSyDxKL0z1s9J0Wq1H1ZqWq1ZqWq1ZqWq1ZqWq&cx=017576662512468239146:omuauf_lfve&q=${encodeURIComponent(query)}`, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    displaySearchResults(data.items || []);
                    return formatSearchResults(data.items || []);
                } else {
                    // Ø¥Ø°Ø§ ÙØ´Ù„ØŒ Ù†Ø³ØªØ®Ø¯Ù… Ø¨Ø¯ÙŠÙ„ (Ù…Ø­Ø§ÙƒØ§Ø© Ø¨Ø­Ø« Ø­Ù‚ÙŠÙ‚ÙŠ Ø¹Ø¨Ø± ÙˆØ§Ø¬Ù‡Ø© Ø£Ø®Ø±Ù‰)
                    return await fallbackSearch(query);
                }
            } catch (error) {
                console.log('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø¯ÙŠÙ„:', error);
                return await fallbackSearch(query);
            }
        }

        // Ø¨Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« - ÙŠØ³ØªØ®Ø¯Ù… Ù…ØµØ§Ø¯Ø± Ù…ÙØªÙˆØ­Ø©
        async function fallbackSearch(query) {
            addMessage('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ø¨Ø± Ù…ØµØ§Ø¯Ø± Ù…ØªØ¹Ø¯Ø¯Ø©...', 'ai');
            
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¨Ø­Ø« Ø­Ù‚ÙŠÙ‚ÙŠ - Ù„ÙƒÙ† Ù‡Ù†Ø§ Ù†Ø¬Ù„Ø¨ Ù†ØªØ§Ø¦Ø¬ Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† ÙˆØ§Ø¬Ù‡Ø§Øª Ø¹Ø§Ù…Ø©
            try {
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ø¬Ù‡Ø© ÙˆÙŠÙƒÙŠØ¨ÙŠØ¯ÙŠØ§
                const wikiResponse = await fetch(`https://ar.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(query)}&format=json&origin=*`);
                const wikiData = await wikiResponse.json();
                
                let results = [];
                if (wikiData.query && wikiData.query.search) {
                    results = wikiData.query.search.slice(0, 3).map(item => ({
                        title: item.title,
                        snippet: item.snippet.replace(/<\/?[^>]+(>|$)/g, ""),
                        link: `https://ar.wikipedia.org/wiki/${encodeURIComponent(item.title)}`
                    }));
                }
                
                displaySearchResults(results);
                return formatSearchResults(results);
            } catch (e) {
                return "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«. Ø¬Ø±Ø¨ ÙƒØªØ§Ø¨Ø© 'Ø§Ø¨Ø­Ø« Ø¹Ù†' Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
            }
        }

        // Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
        function displaySearchResults(results) {
            let html = '<h3 style="display: flex; align-items: center; gap: 10px;"><i class="fas fa-search" style="color: #4285F4;"></i> Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</h3>';
            
            if (results.length === 0) {
                html += '<p style="color: #99aabb;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</p>';
            } else {
                results.forEach((item, index) => {
                    html += `
                        <div class="search-result">
                            <h4>${index+1}. ${item.title || 'Ø¹Ù†ÙˆØ§Ù†'}</h4>
                            <p>${item.snippet || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
                            <a href="${item.link || '#'}" target="_blank" class="search-link">
                                <i class="fas fa-external-link-alt"></i> Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…ØµØ¯Ø±
                            </a>
                        </div>
                    `;
                });
            }
            
            sidebarContent.innerHTML = html + generatedScriptsHTML();
        }

        // ------------------------------------------------------
        // Ø¨Ø±Ù…Ø¬Ø© Ø³ÙƒØ±Ø¨ØªØ§Øª - Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø­Ù‚ÙŠÙ‚ÙŠ
        // ------------------------------------------------------
        async function generateScript(request) {
            addThinking('ğŸ§  Ø¬Ø§Ø±ÙŠ Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨...');
            
            // ØªØ­Ø¯ÙŠØ¯ Ù„ØºØ© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            let language = 'javascript';
            let task = request;
            
            if (request.includes('python') || request.includes('Ø¨Ø§ÙŠØ«Ø±ÙˆÙ†')) language = 'python';
            if (request.includes('php')) language = 'php';
            if (request.includes('java')) language = 'java';
            if (request.includes('html') || request.includes('css')) language = 'html';
            
            // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨
            let script = '';
            let explanation = '';
            
            if (request.includes('Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø©') || request.includes('calculator')) {
                if (language === 'javascript') {
                    script = `// Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© Ù…ØªØ·ÙˆØ±Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
class Calculator {
    constructor() {
        this.result = 0;
    }
    
    add(a, b) { return a + b; }
    subtract(a, b) { return a - b; }
    multiply(a, b) { return a * b; }
    divide(a, b) { 
        if(b === 0) throw new Error('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ù‚Ø³Ù…Ø© Ø¹Ù„Ù‰ ØµÙØ±');
        return a / b; 
    }
    
    power(a, b) { return Math.pow(a, b); }
    sqrt(a) { return Math.sqrt(a); }
    sin(deg) { return Math.sin(deg * Math.PI / 180); }
    cos(deg) { return Math.cos(deg * Math.PI / 180); }
}

// Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¢Ù„Ø© Ø§Ù„Ø­Ø§Ø³Ø¨Ø©
const calc = new Calculator();
console.log('5 + 3 =', calc.add(5, 3));
console.log('10 Ã— 4 =', calc.multiply(10, 4));`;
                    
                    explanation = 'Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ø¯ÙˆØ§Ù„ Ø¹Ù„Ù…ÙŠØ©';
                }
            }
            else if (request.includes('ØªÙˆÙŠØªØ±') || request.includes('twitter') || request.includes('ØªØºØ±ÙŠØ¯Ø©')) {
                if (language === 'javascript') {
                    script = `// Ø³ÙƒØ±Ø¨Øª Ù„Ù†Ø´Ø± ØªØºØ±ÙŠØ¯Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ© - Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
// Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ­ØªØ§Ø¬ Ù…ÙØ§ØªÙŠØ­ API Ù…Ù† ØªÙˆÙŠØªØ±

const axios = require('axios');
const OAuth = require('oauth-1.0a');
const crypto = require('crypto');

class TwitterBot {
    constructor(apiKey, apiSecret, accessToken, tokenSecret) {
        this.apiKey = apiKey;
        this.apiSecret = apiSecret;
        this.accessToken = accessToken;
        this.tokenSecret = tokenSecret;
        
        this.oauth = OAuth({
            consumer: { key: apiKey, secret: apiSecret },
            signature_method: 'HMAC-SHA1',
            hash_function(base_string, key) {
                return crypto
                    .createHmac('sha1', key)
                    .update(base_string)
                    .digest('base64');
            }
        });
    }
    
    async tweet(message) {
        const url = 'https://api.twitter.com/1.1/statuses/update.json';
        const authHeader = this.oauth.toHeader(this.oauth.authorize({
            url,
            method: 'POST',
            data: { status: message }
        }, { key: this.accessToken, secret: this.tokenSecret }));
        
        try {
            const response = await axios.post(url, 
                { status: message },
                { headers: { ...authHeader, 'Content-Type': 'application/x-www-form-urlencoded' } }
            );
            return response.data;
        } catch (error) {
            console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØºØ±ÙŠØ¯Ø©:', error.response.data);
            throw error;
        }
    }
}

// Ù…Ø«Ø§Ù„ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
const bot = new TwitterBot('API_KEY', 'API_SECRET', 'ACCESS_TOKEN', 'TOKEN_SECRET');
bot.tweet('Ù…Ø±Ø­Ø¨Ø§Ù‹ Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ÙØ§Ø¦Ù‚! ğŸ¤–');`;
                    
                    explanation = 'Ø³ÙƒØ±Ø¨Øª Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ØªÙˆÙŠØªØ± - ÙŠÙ†Ø´Ø± ØªØºØ±ÙŠØ¯Ø§Øª ÙˆÙŠÙ‚Ø±Ø£ Ø§Ù„Ù…Ù†Ø´Ù†';
                }
            }
            else if (request.includes('chat') || request.includes('Ù…Ø­Ø§Ø¯Ø«Ø©') || request.includes('Ø¨ÙˆØª')) {
                if (language === 'python') {
                    script = `# Ø¨ÙˆØª Ù…Ø­Ø§Ø¯Ø«Ø© Ø°ÙƒÙŠ - Ù…Ø¨Ø±Ù…Ø¬ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
import nltk
from nltk.chat.util import Chat, reflections

# ØªØ¹Ø±ÙŠÙ Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
patterns = [
    (r'Ù…Ø±Ø­Ø¨Ø§|Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…|Ù‡Ù„Ø§', 
     ['ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù…! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ']),
    (r'ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ', 
     ['Ø£Ù†Ø§ Ø¨Ø®ÙŠØ±ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ÙƒÙŠÙ Ø£Ù†ØªØŸ']),
    (r'Ù…Ø§ Ø§Ø³Ù…Ùƒ', 
     ['Ø£Ù†Ø§ Ø¨ÙˆØª Ø°ÙƒÙŠ ØªÙ… Ø¨Ø±Ù…Ø¬ØªÙŠ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ']),
    (r'(.*) Ø¹Ù…Ø±Ùƒ (.*)', 
     ['Ø¹Ù…Ø±ÙŠ Ø¨Ø¶Ø¹ Ø¯Ù‚Ø§Ø¦Ù‚ ÙÙ‚Ø·! ğŸ˜Š']),
    (r'(.*) Ø´ÙƒØ±Ø§ (.*)', 
     ['Ø§Ù„Ø¹ÙÙˆØŒ Ø¯Ø§Ø¦Ù…Ø§Ù‹ ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©!']),
]

# Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙˆØª
chatbot = Chat(patterns, reflections)

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
print("Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø°ÙƒÙŠ Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø© - Ø§ÙƒØªØ¨ 'Ø®Ø±ÙˆØ¬' Ù„Ù„Ø¥Ù†Ù‡Ø§Ø¡")
while True:
    user_input = input("Ø£Ù†Øª: ")
    if user_input.lower() in ['Ø®Ø±ÙˆØ¬', 'quit', 'exit']:
        print("Ø§Ù„Ø¨ÙˆØª: Ù…Ø¹ Ø§Ù„Ø³Ù„Ø§Ù…Ø©!")
        break
    response = chatbot.respond(user_input)
    print(f"Ø§Ù„Ø¨ÙˆØª: {response}")`;
                    
                    explanation = 'Ø¨ÙˆØª Ù…Ø­Ø§Ø¯Ø«Ø© Ù…ØªÙƒØ§Ù…Ù„ Ø¨Ù„ØºØ© Python';
                }
            }
            else {
                // Ø³ÙƒØ±Ø¨Øª Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø­Ø³Ø¨ Ø§Ù„Ø·Ù„Ø¨
                if (language === 'javascript') {
                    script = `// Ø³ÙƒØ±Ø¨Øª ${request} - ØªÙ…Øª Ø¨Ø±Ù…Ø¬ØªÙ‡ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ÙØ§Ø¦Ù‚
// Ù‡Ø°Ø§ Ø³ÙƒØ±Ø¨Øª Ù…Ø®ØµØµ Ø­Ø³Ø¨ Ø·Ù„Ø¨Ùƒ

async function processRequest() {
    try {
        // Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        console.log('Ø¬Ø§Ø±ÙŠ ØªÙ†ÙÙŠØ°: ${request}');
        
        // Ø£Ø¶Ù Ù…Ù†Ø·Ù‚Ùƒ Ù‡Ù†Ø§
        const result = await performTask();
        
        return {
            success: true,
            data: result,
            timestamp: new Date().toISOString()
        };
    } catch (error) {
        console.error('Ø®Ø·Ø£:', error);
        return {
            success: false,
            error: error.message
        };
    }
}

async function performTask() {
    // Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ ÙŠØªÙ… ØªØ®ØµÙŠØµÙ‡ Ø­Ø³Ø¨ Ù…ØªØ·Ù„Ø¨Ø§ØªÙƒ
    return {
        message: 'ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø¨Ù†Ø¬Ø§Ø­',
        request: '${request}',
        ai: 'Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ÙØ§Ø¦Ù‚'
    };
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨Øª
processRequest().then(console.log);`;
                    
                    explanation = `Ø³ÙƒØ±Ø¨Øª Ù…Ø®ØµØµ Ù„Ù€: ${request}`;
                }
            }
            
            // Ø­ÙØ¸ Ø§Ù„Ø³ÙƒØ±Ø¨Øª
            const scriptObj = {
                id: Date.now(),
                title: `Ø³ÙƒØ±Ø¨Øª ${language}: ${request.substring(0, 30)}`,
                code: script,
                language: language,
                explanation: explanation,
                timestamp: new Date().toLocaleString('ar-SA')
            };
            
            generatedScripts.unshift(scriptObj);
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±Ø¨Øª
            displayScript(scriptObj);
            
            return script;
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±Ø¨Øª ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ÙˆØ§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
        function displayScript(scriptObj) {
            // Ø¹Ø±Ø¶ ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
            const message = `âœ… **ØªÙ… Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø¨Ù†Ø¬Ø§Ø­!**

**Ø§Ù„ÙˆØµÙ:** ${scriptObj.explanation}
**Ø§Ù„Ù„ØºØ©:** ${scriptObj.language}
**Ø§Ù„ÙˆÙ‚Øª:** ${scriptObj.timestamp}

\`\`\`${scriptObj.language}
${scriptObj.code}
\`\`\`

ÙŠÙ…ÙƒÙ†Ùƒ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø©. Ù‡Ù„ ØªØ±ÙŠØ¯Ù†ÙŠ Ø¨Ø±Ù…Ø¬Ø© Ø´ÙŠØ¡ Ø¢Ø®Ø±ØŸ`;
            
            addMessage(message, 'ai');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
            sidebarContent.innerHTML = generatedScriptsHTML();
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª Ø§Ù„Ù…ÙˆÙ„Ø¯Ø©
        function generatedScriptsHTML() {
            if (generatedScripts.length === 0) return '';
            
            let html = '<h3 style="margin-top: 30px;"><i class="fas fa-code" style="color: #88ddff;"></i> Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª Ø§Ù„Ù…ÙˆÙ„Ø¯Ø©</h3>';
            
            generatedScripts.forEach((script, index) => {
                html += `
                    <div class="generated-script">
                        <div class="script-title">
                            <i class="fas fa-file-code"></i>
                            ${script.title}
                        </div>
                        <div class="script-preview">
                            ${script.code.substring(0, 150)}...
                        </div>
                        <div style="margin-top: 12px; display: flex; gap: 8px;">
                            <button onclick="copyScript('${script.id}')" class="copy-btn" style="background: #0055ff;">
                                <i class="fas fa-copy"></i> Ù†Ø³Ø®
                            </button>
                            <span style="color: #8899bb; font-size: 12px;">${script.language}</span>
                        </div>
                    </div>
                `;
            });
            
            return html;
        }

        // ------------------------------------------------------
        // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹
        // ------------------------------------------------------
        async function analyzeWebsite(url) {
            addThinking(`Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${url}`);
            
            try {
                // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø±Ø§Ø¨Ø·
                url = url.replace(/^(Ø§Ø¨Ø­Ø« Ø¹Ù†|Ø­Ù„Ù„|Ù…ÙˆÙ‚Ø¹|ØªØ­Ù„ÙŠÙ„)\s*/i, '').trim();
                if (!url.startsWith('http')) {
                    url = 'https://' + url;
                }
                
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ø¬Ù‡Ø© ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹
                const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`);
                const data = await response.json();
                
                if (data.contents) {
                    const titleMatch = data.contents.match(/<title>(.*?)<\/title>/i);
                    const title = titleMatch ? titleMatch[1] : 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†';
                    
                    const analysis = `
**ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹:** ${url}

**Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:** ${title}
**Ø§Ù„Ø­Ø§Ù„Ø©:** Ù…ØªØµÙ„ âœ…
**ÙˆÙ‚Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„:** ${new Date().toLocaleString('ar-SA')}

**Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹:**
- Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ
- ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ù†Ø¬Ø§Ø­
- Ø¬Ø§Ù‡Ø² Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø¯Ø¯Ø© Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŸ`;
                    
                    addMessage(analysis, 'ai');
                    return analysis;
                }
            } catch (error) {
                addMessage(`âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${error.message}`, 'ai');
                return null;
            }
        }

        // ------------------------------------------------------
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£ÙˆØ§Ù…Ø±
        // ------------------------------------------------------
        async function processCommand(input) {
            input = input.toLowerCase().trim();
            
            // Ø£Ù…Ø± Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚ÙˆÙ‚Ù„
            if (input.includes('Ø§Ø¨Ø­Ø« Ø¹Ù†') || input.includes('Ø¨Ø­Ø«') || input.includes('Ù‚ÙˆÙ‚Ù„') || input.includes('google')) {
                const query = input.replace(/Ø§Ø¨Ø­Ø« Ø¹Ù†|Ø¨Ø­Ø«|ÙÙŠ Ù‚ÙˆÙ‚Ù„|Ù‚ÙˆÙ‚Ù„|google|Ø¹Ù†/gi, '').trim();
                if (query) {
                    const results = await searchGoogle(query);
                    return results;
                }
            }
            
            // Ø£Ù…Ø± Ø¨Ø±Ù…Ø¬Ø© Ø³ÙƒØ±Ø¨Øª
            else if (input.includes('Ø¨Ø±Ù…Ø¬') || input.includes('Ø³ÙƒØ±Ø¨Øª') || input.includes('Ø§ÙƒØªØ¨ ÙƒÙˆØ¯') || input.includes('code') || input.includes('script')) {
                const task = input.replace(/Ø¨Ø±Ù…Ø¬|Ø³ÙƒØ±Ø¨Øª|Ø§ÙƒØªØ¨|ÙƒÙˆØ¯|Ù„ÙŠ|this|code|script/gi, '').trim();
                if (task) {
                    const script = await generateScript(task);
                    return script;
                }
            }
            
            // Ø£Ù…Ø± ØªØ­Ù„ÙŠÙ„ Ù…ÙˆÙ‚Ø¹
            else if (input.includes('Ø­Ù„Ù„') || input.includes('Ù…ÙˆÙ‚Ø¹') || input.includes('ØªØ­Ù„ÙŠÙ„') || input.includes('website')) {
                const url = input.replace(/Ø­Ù„Ù„|Ù…ÙˆÙ‚Ø¹|ØªØ­Ù„ÙŠÙ„|analyse|website/gi, '').trim();
                if (url) {
                    await analyzeWebsite(url);
                    return "ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø£Ø¹Ù„Ø§Ù‡";
                }
            }
            
            // Ø£Ù…Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
            else if (input.includes('Ù…Ø³Ø§Ø¹Ø¯Ø©') || input.includes('Ø§ÙˆØ§Ù…Ø±') || input.includes('help')) {
                return `**Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…ØªØ§Ø­Ø©:** ğŸ¤–

ğŸ” **Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚ÙˆÙ‚Ù„:**
â€¢ "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙØ¶Ù„ Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªØ¹Ù„Ù…"
â€¢ "Ø¨Ø­Ø« ÙÙŠ Ù‚ÙˆÙ‚Ù„ Ø¹Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ"

ğŸ’» **Ø¨Ø±Ù…Ø¬Ø© Ø³ÙƒØ±Ø¨ØªØ§Øª:**
â€¢ "Ø¨Ø±Ù…Ø¬ Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª"
â€¢ "Ø³ÙƒØ±Ø¨Øª Ø¨ÙˆØª ØªÙˆÙŠØªØ± Ø¨Ø§ÙŠØ«ÙˆÙ†"
â€¢ "Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ Ù…ÙˆÙ‚Ø¹ Ø¨Ø³ÙŠØ·"

ğŸŒ **ØªØ­Ù„ÙŠÙ„ Ù…ÙˆØ§Ù‚Ø¹:**
â€¢ "Ø­Ù„Ù„ Ù…ÙˆÙ‚Ø¹ example.com"
â€¢ "ØªØ­Ù„ÙŠÙ„ https://google.com"

**Ø¬Ø±Ø¨ Ø§Ù„Ø¢Ù†!** Ø§ÙƒØªØ¨ Ø£ÙŠ Ø£Ù…Ø± ÙˆØ³Ø£Ù†ÙØ°Ù‡ ÙÙˆØ±Ø§Ù‹.`;
            }
            
            // Ø±Ø¯ÙˆØ¯ Ø°ÙƒÙŠØ©
            else {
                const responses = [
                    "Ù†Ø¹Ù…ØŒ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚ÙˆÙ‚Ù„ Ø£Ùˆ Ø¨Ø±Ù…Ø¬Ø© Ø£ÙŠ Ø³ÙƒØ±Ø¨Øª ØªØ±ÙŠØ¯Ù‡.",
                    "Ø£Ù†Ø§ Ù‡Ù†Ø§! Ø¬Ø±Ø¨ Ø£Ù† ØªØ·Ù„Ø¨ Ù…Ù†ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø´ÙŠØ¡ Ø£Ùˆ Ø¨Ø±Ù…Ø¬Ø© Ø³ÙƒØ±Ø¨Øª Ù…Ø¹ÙŠÙ†.",
                    "Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ù†ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¹ÙŠÙ†Ø©ØŸ Ø£Ùˆ Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚ØŸ"
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
        }

        // ------------------------------------------------------
        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø©
        // ------------------------------------------------------
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', sender);
            
            const avatar = document.createElement('div');
            avatar.classList.add('message-avatar');
            if (sender === 'user') {
                avatar.innerHTML = '<i class="fas fa-user"></i>';
            } else {
                avatar.innerHTML = '<i class="fas fa-robot"></i>';
            }
            
            const content = document.createElement('div');
            content.classList.add('message-content');
            
            // ØªØ­ÙˆÙŠÙ„ markdown Ø§Ù„Ø¨Ø³ÙŠØ·
            let formattedText = text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/```(\w+)?\n([\s\S]*?)```/g, function(match, lang, code) {
                    return `<div class="code-block">
                        <div class="code-header">
                            <span style="color: #88ddff;">${lang || 'code'}</span>
                            <button class="copy-btn" onclick="copyCode(this)"><i class="fas fa-copy"></i> Ù†Ø³Ø®</button>
                        </div>
                        <pre style="margin:0; font-family: monospace;">${code}</pre>
                    </div>`;
                });
            
            content.innerHTML = formattedText + `<div style="font-size: 11px; color: #99aacc; margin-top: 8px;">${new Date().toLocaleTimeString('ar-SA')}</div>`;
            
            if (sender === 'user') {
                messageDiv.appendChild(content);
                messageDiv.appendChild(avatar);
            } else {
                messageDiv.appendChild(avatar);
                messageDiv.appendChild(content);
            }
            
            chatbox.appendChild(messageDiv);
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        function addThinking(text) {
            const thinkingDiv = document.createElement('div');
            thinkingDiv.classList.add('thinking');
            thinkingDiv.innerHTML = `
                <span></span><span></span><span></span>
                <span style="color: #aaddff; margin-right: 10px;">${text}</span>
            `;
            chatbox.appendChild(thinkingDiv);
            chatbox.scrollTop = chatbox.scrollHeight;
            
            // Ø­Ø°Ù ØªÙÙƒÙŠØ± Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ©
            setTimeout(() => {
                if (thinkingDiv.parentNode) {
                    thinkingDiv.remove();
                }
            }, 1500);
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;
            
            addMessage(text, 'user');
            userInput.value = '';
            sendBtn.disabled = true;
            
            try {
                const response = await processCommand(text);
                if (response) {
                    addMessage(response, 'ai');
                }
            } catch (error) {
                addMessage('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: ' + error.message, 'ai');
            } finally {
                sendBtn.disabled = false;
                userInput.focus();
            }
        }

        // Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯
        window.copyCode = function(button) {
            const pre = button.closest('.code-block').querySelector('pre');
            const code = pre.innerText;
            navigator.clipboard.writeText(code);
            button.innerHTML = '<i class="fas fa-check"></i> ØªÙ…!';
            setTimeout(() => {
                button.innerHTML = '<i class="fas fa-copy"></i> Ù†Ø³Ø®';
            }, 2000);
        };

        window.copyScript = function(id) {
            const script = generatedScripts.find(s => s.id == id);
            if (script) {
                navigator.clipboard.writeText(script.code);
                alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø³ÙƒØ±Ø¨Øª!');
            }
        };

        function clearChat() {
            chatbox.innerHTML = '';
            addMessage('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©. Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø©!', 'ai');
        }

        function formatSearchResults(items) {
            if (!items || items.length === 0) {
                return "âŒ Ù„Ù… Ø£Ø¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø«";
            }
            
            let response = "ğŸ” **Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±:**\n\n";
            items.slice(0, 3).forEach((item, i) => {
                response += `${i+1}. **${item.title || 'Ø¹Ù†ÙˆØ§Ù†'}**\n`;
                response += `${item.snippet || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}\n`;
                response += `[Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ØµØ¯Ø±](${item.link || '#'})\n\n`;
            });
            
            return response;
        }

        function loadAPIKeys() {
            // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ù…ÙØ§ØªÙŠØ­ API Ù…Ù† localStorage
            const savedKey = localStorage.getItem('google_api_key');
            if (savedKey) {
                GOOGLE_API_KEY = savedKey;
            }
        }

        // Ø£Ø­Ø¯Ø§Ø«
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>
